# Refine History - Multiple Choice Game

## Refinement 2025-12-15

**Mode:** FEATURE
**Modification:** UX improvements for player quiz experience

**Changes Made:**

### 1. Progress Bar â†’ Text
- Removed visual progress bar (colored segments)
- Changed to simple text: "Vraag X van Y"

### 2. Question Image Support
- Added `image_path` column to `route_stops` table (migration)
- Updated `RouteStop` model fillable to include `image_path`
- Updated `generateRouteStops()` to copy `image_path` from template
- Display image in player view when available

### 3. Inline Answer Feedback
- Removed popup/toast notification for answer feedback
- Answer option shows green border + background for correct
- Answer option shows red border + background for incorrect
- Other options dimmed (opacity) after answer
- Checkmark/cross icon displayed on answered option

### 4. Submit Button Improvements
- Button stays visible after answering (no longer disappears)
- Shows loading spinner during submission
- Changes to green with checkmark + "Correct!" for correct answers
- Changes to red with cross + "Helaas, fout" for wrong answers
- Fixed height to prevent layout shift during loading animation

### 5. Feedback Flow Fix
- Keep showing answered question during 2s feedback period
- Added `answeredQuestionId` property to track feedback context
- Only load next question after `clearFeedback()` is called

**Files Modified:**

| File | Change |
|------|--------|
| `database/migrations/2025_12_15_120000_add_image_path_to_route_stops_table.php` | New migration for image_path column |
| `app/Models/RouteStop.php` | Added `image_path` to fillable |
| `app/Livewire/HostLobby.php` | Copy `image_path` in generateRouteStops() |
| `app/Livewire/PlayerRouteQuestion.php` | Added `answeredOption`, `answeredQuestionId` properties; feedback flow logic |
| `resources/views/livewire/player-route-question.blade.php` | Progress text, image display, inline feedback styling, button states |
| `tests/Feature/Livewire/PlayerRouteQuestionTest.php` | Updated progress text assertion |

**Tests:** 13/13 passed

---
*Generated by /4-refine skill*
